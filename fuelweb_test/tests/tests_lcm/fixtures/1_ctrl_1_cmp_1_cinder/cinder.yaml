roles:
  cinder
tasks:
  cgroups: null
  clear_nodes_info:
    type: shell
  configure_default_route:
    check:
    - Anchor[l23network::init]
    - Anchor[l23network::l2::init]
    - File[/etc/network/interfaces.d]
    - File[/etc/network/interfaces]
    - Filebucket[puppet]
    - K_mod[8021q]
    - K_mod[bonding]
    - K_mod[bridge]
    - K_mod[openvswitch]
    - L2_port[enp0s6.103]
    - L3_clear_route[default]
    - L3_ifconfig[br-mesh]
    - L3_ifconfig[br-storage]
    - Package[bridge-utils]
    - Package[ethtool]
    - Package[ifenslave]
    - Package[iputils-arping]
    - Package[network-manager]
    - Package[openvswitch-common]
    - Package[openvswitch-datapath]
    - Package[vlan]
    - Schedule[daily]
    - Schedule[hourly]
    - Schedule[monthly]
    - Schedule[never]
    - Schedule[puppet]
    - Schedule[weekly]
    - Service[openvswitch-service]
    skip:
    - Disable_hotplug[global]
    - Enable_hotplug[global]
    - L23_stored_config[br-fw-admin]
    - L23_stored_config[br-mesh]
    - L23_stored_config[br-mgmt]
    - L23_stored_config[br-storage]
    - L23_stored_config[enp0s3]
    - L23_stored_config[enp0s5]
    - L23_stored_config[enp0s6.103]
    - L23_stored_config[enp0s6]
    - L23_stored_config[enp0s7]
    - L2_bridge[br-fw-admin]
    - L2_bridge[br-mesh]
    - L2_bridge[br-mgmt]
    - L2_bridge[br-storage]
    - L2_port[enp0s3]
    - L2_port[enp0s5]
    - L2_port[enp0s6]
    - L2_port[enp0s7]
    - L3_ifconfig[br-fw-admin]
    - L3_ifconfig[br-mgmt]
    - Notify[SDN]
  connectivity_tests: null
  copy_haproxy_keys:
    type: shell
  copy_keys:
    type: shell
  copy_keys_ceph:
    type: shell
  dns-client: null
  enable_cinder_volume_service: null
  firewall: null
  fuel_pkgs: null
  globals: null
  hosts: null
  logging: null
  netconfig:
    check:
    - Anchor[l23network::init]
    - Anchor[l23network::l2::init]
    - File[/etc/network/interfaces.d]
    - File[/etc/network/interfaces]
    - File[/etc/sysctl.conf]
    - File[sysfs.d]
    - Filebucket[puppet]
    - K_mod[8021q]
    - K_mod[bonding]
    - K_mod[bridge]
    - K_mod[openvswitch]
    - L2_port[enp0s6.103]
    - L3_ifconfig[br-mesh]
    - L3_ifconfig[br-mgmt]
    - L3_ifconfig[br-storage]
    - Package[bridge-utils]
    - Package[ethtool]
    - Package[ifenslave]
    - Package[iputils-arping]
    - Package[irqbalance]
    - Package[network-manager]
    - Package[openvswitch-common]
    - Package[openvswitch-datapath]
    - Package[sysfsutils]
    - Package[vlan]
    - Ping_host[10.109.15.1]
    - Schedule[daily]
    - Schedule[hourly]
    - Schedule[monthly]
    - Schedule[never]
    - Schedule[puppet]
    - Schedule[weekly]
    - Service[openvswitch-service]
    - Sysctl[net.core.netdev_max_backlog]
    - Sysctl[net.ipv4.conf.all.arp_accept]
    - Sysctl[net.ipv4.conf.default.arp_accept]
    - Sysctl[net.ipv4.tcp_keepalive_intvl]
    - Sysctl[net.ipv4.tcp_keepalive_probes]
    - Sysctl[net.ipv4.tcp_keepalive_time]
    - Sysctl[net.ipv4.tcp_retries2]
    - Sysctl_runtime[net.core.netdev_max_backlog]
    - Sysctl_runtime[net.ipv4.conf.all.arp_accept]
    - Sysctl_runtime[net.ipv4.conf.default.arp_accept]
    - Sysctl_runtime[net.ipv4.tcp_keepalive_intvl]
    - Sysctl_runtime[net.ipv4.tcp_keepalive_probes]
    - Sysctl_runtime[net.ipv4.tcp_keepalive_time]
    - Sysctl_runtime[net.ipv4.tcp_retries2]
    - Sysfs_config_value[rps_cpus]
    - Sysfs_config_value[xps_cpus]
    skip:
    - Disable_hotplug[global]
    - Enable_hotplug[global]
    - Exec[wait-for-interfaces]
    - L23_stored_config[br-fw-admin]
    - L23_stored_config[br-mesh]
    - L23_stored_config[br-mgmt]
    - L23_stored_config[br-storage]
    - L23_stored_config[enp0s3]
    - L23_stored_config[enp0s5]
    - L23_stored_config[enp0s6.103]
    - L23_stored_config[enp0s6]
    - L23_stored_config[enp0s7]
    - L2_bridge[br-fw-admin]
    - L2_bridge[br-mesh]
    - L2_bridge[br-mgmt]
    - L2_bridge[br-storage]
    - L2_port[enp0s3]
    - L2_port[enp0s5]
    - L2_port[enp0s6]
    - L2_port[enp0s7]
    - L3_clear_route[default]
    - L3_ifconfig[br-fw-admin]
    - Notify[SDN]
    - Service[irqbalance]
    - Service[sysfsutils]
  ntp-client: null
  override_configuration: null
  reboot_provisioned_nodes:
    type: shell
  reserved_ports: null
  rsync_core_puppet:
    type: shell
  setup_repositories: null
  ssl-add-trust-chain: null
  ssl-keys-saving: null
  sync_time:
    type: shell
  tools: null
  top-role-cinder:
    check:
    - Anchor[cinder-start]
    - Cinder_config[DEFAULT/api_paste_config]
    - Cinder_config[DEFAULT/auth_strategy]
    - Cinder_config[DEFAULT/backup_api_class]
    - Cinder_config[DEFAULT/backup_compression_algorithm]
    - Cinder_config[DEFAULT/backup_driver]
    - Cinder_config[DEFAULT/backup_manager]
    - Cinder_config[DEFAULT/backup_name_template]
    - Cinder_config[DEFAULT/backup_swift_auth_url]
    - Cinder_config[DEFAULT/backup_swift_container]
    - Cinder_config[DEFAULT/backup_swift_object_size]
    - Cinder_config[DEFAULT/backup_swift_retry_attempts]
    - Cinder_config[DEFAULT/backup_swift_retry_backoff]
    - Cinder_config[DEFAULT/backup_swift_url]
    - Cinder_config[DEFAULT/backup_topic]
    - Cinder_config[DEFAULT/control_exchange]
    - Cinder_config[DEFAULT/debug]
    - Cinder_config[DEFAULT/default_availability_zone]
    - Cinder_config[DEFAULT/default_log_levels]
    - Cinder_config[DEFAULT/enable_v1_api]
    - Cinder_config[DEFAULT/enable_v2_api]
    - Cinder_config[DEFAULT/fatal_deprecations]
    - Cinder_config[DEFAULT/glance_api_insecure]
    - Cinder_config[DEFAULT/glance_api_servers]
    - Cinder_config[DEFAULT/glance_api_ssl_compression]
    - Cinder_config[DEFAULT/glance_api_version]
    - Cinder_config[DEFAULT/glance_num_retries]
    - Cinder_config[DEFAULT/glance_request_timeout]
    - Cinder_config[DEFAULT/host]
    - Cinder_config[DEFAULT/image_conversion_dir]
    - Cinder_config[DEFAULT/instance_format]
    - Cinder_config[DEFAULT/instance_uuid_format]
    - Cinder_config[DEFAULT/iscsi_helper]
    - Cinder_config[DEFAULT/iscsi_ip_address]
    - Cinder_config[DEFAULT/iscsi_protocol]
    - Cinder_config[DEFAULT/kombu_reconnect_delay]
    - Cinder_config[DEFAULT/log_config_append]
    - Cinder_config[DEFAULT/log_date_format]
    - Cinder_config[DEFAULT/log_dir]
    - Cinder_config[DEFAULT/logging_context_format_string]
    - Cinder_config[DEFAULT/logging_debug_format_suffix]
    - Cinder_config[DEFAULT/logging_default_format_string]
    - Cinder_config[DEFAULT/logging_exception_prefix]
    - Cinder_config[DEFAULT/notification_driver]
    - Cinder_config[DEFAULT/publish_errors]
    - Cinder_config[DEFAULT/report_interval]
    - Cinder_config[DEFAULT/rpc_backend]
    - Cinder_config[DEFAULT/service_down_time]
    - Cinder_config[DEFAULT/ssl_ca_file]
    - Cinder_config[DEFAULT/ssl_cert_file]
    - Cinder_config[DEFAULT/ssl_key_file]
    - Cinder_config[DEFAULT/storage_availability_zone]
    - Cinder_config[DEFAULT/syslog_log_facility]
    - Cinder_config[DEFAULT/use_stderr]
    - Cinder_config[DEFAULT/use_syslog]
    - Cinder_config[DEFAULT/use_syslog_rfc_format]
    - Cinder_config[DEFAULT/verbose]
    - Cinder_config[DEFAULT/volume_backend_name]
    - Cinder_config[DEFAULT/volume_clear]
    - Cinder_config[DEFAULT/volume_clear_ionice]
    - Cinder_config[DEFAULT/volume_clear_size]
    - Cinder_config[DEFAULT/volume_driver]
    - Cinder_config[DEFAULT/volume_group]
    - Cinder_config[DEFAULT/volumes_dir]
    - Cinder_config[database/connection]
    - Cinder_config[database/idle_timeout]
    - Cinder_config[database/max_overflow]
    - Cinder_config[database/max_pool_size]
    - Cinder_config[database/max_retries]
    - Cinder_config[database/min_pool_size]
    - Cinder_config[database/retry_interval]
    - Cinder_config[keymgr/fixed_key]
    - Cinder_config[keystone_authtoken/signing_dir]
    - Cinder_config[keystone_authtoken/signing_dirname]
    - Cinder_config[oslo_concurrency/lock_path]
    - Cinder_config[oslo_messaging_rabbit/amqp_durable_queues]
    - Cinder_config[oslo_messaging_rabbit/heartbeat_rate]
    - Cinder_config[oslo_messaging_rabbit/heartbeat_timeout_threshold]
    - Cinder_config[oslo_messaging_rabbit/kombu_reconnect_delay]
    - Cinder_config[oslo_messaging_rabbit/kombu_ssl_ca_certs]
    - Cinder_config[oslo_messaging_rabbit/kombu_ssl_certfile]
    - Cinder_config[oslo_messaging_rabbit/kombu_ssl_keyfile]
    - Cinder_config[oslo_messaging_rabbit/kombu_ssl_version]
    - Cinder_config[oslo_messaging_rabbit/rabbit_ha_queues]
    - Cinder_config[oslo_messaging_rabbit/rabbit_host]
    - Cinder_config[oslo_messaging_rabbit/rabbit_hosts]
    - Cinder_config[oslo_messaging_rabbit/rabbit_password]
    - Cinder_config[oslo_messaging_rabbit/rabbit_port]
    - Cinder_config[oslo_messaging_rabbit/rabbit_use_ssl]
    - Cinder_config[oslo_messaging_rabbit/rabbit_userid]
    - Cinder_config[oslo_messaging_rabbit/rabbit_virtual_host]
    - Filebucket[puppet]
    - Package[cinder-backup]
    - Package[cinder-volume]
    - Package[cinder]
    - Package[python-amqp]
    - Package[python-mysqldb]
    - Package[tgt]
    - Schedule[daily]
    - Schedule[hourly]
    - Schedule[monthly]
    - Schedule[never]
    - Schedule[puppet]
    - Schedule[weekly]
    - Service[cinder-backup]
    - Service[tgtd]
    skip:
    - Service[cinder-volume]
  update_hosts: null
  upload_nodes_info:
    type: shell